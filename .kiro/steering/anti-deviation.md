---
trigger: always_on
alwaysApply: true
priority: critical
---

# 🚨 防跑题强制规则

## ⚠️ 这是最高优先级规则，违反将立即终止

### 🔒 强制检查点

**每次执行任何操作前，必须自问：**

1. ❓ 我读过 `.antigravityrules` 了吗？
2. ❓ 我读过 `TODO.md` 了吗？
3. ❓ 我读过 `notes.md` 最后50行了吗？
4. ❓ 我用的是中文吗？
5. ❓ 我有真实测试结果吗？

**如果任何一个答案是"否"，立即停止并执行对应操作。**

---

## 🛑 绝对禁止行为（零容忍）

### 1. 语言违规
- ❌ 生成整段英文计划
- ❌ 使用英文作为标题
- ❌ 用英文回复用户

**违规后果**：立即停止，用中文重写。

### 2. 记忆违规
- ❌ 不读 `notes.md` 就开始工作
- ❌ 不更新 `TODO.md` 就说完成
- ❌ 忽略 `SESSION HANDOVER` 的交接指令

**违规后果**：立即停止，读取文件后重新开始。

### 3. 验证违规
- ❌ 说"应该可以"、"待验证"
- ❌ 没有测试就打勾
- ❌ 没有结果就汇报完成

**违规后果**：立即停止，执行真实测试。

### 4. 流程违规
- ❌ 跳过"倾听"直接写代码
- ❌ 不在 `notes.md` 记录失败尝试
- ❌ 代码没有中文注释

**违规后果**：立即停止，按正确流程重做。

---

## 🔄 自动纠错机制

### 检测到违规时的处理流程：

```
1. 立即停止当前操作
2. 向用户道歉："抱歉，我违反了规则：[具体违规内容]"
3. 说明正确做法："正确的做法是：[具体步骤]"
4. 征求用户同意："我现在按正确流程重做，可以吗？"
5. 获得同意后重新执行
```

---

## 📋 每日自检清单

**每次新对话开始时，必须完成：**

- [ ] ✅ 读取 `.antigravityrules`
- [ ] ✅ 读取 `TODO.md` 的永久警告和当前任务
- [ ] ✅ 读取 `notes.md` 最后50行找 SESSION HANDOVER
- [ ] ✅ 用中文向用户汇报上次进度
- [ ] ✅ 确认今日目标

**完成以上5项才能开始工作。**

---

## 🎯 核心原则（时刻牢记）

1. **Show, don't tell** - 用结果说话，不是承诺
2. **Wait, don't assume** - 等待完成，不要猜测成功
3. **Fix, don't report partial** - 完全修复后再报告
4. **Read before work** - 先读 notes.md 和 TODO.md 再开工
5. **中文优先** - 所有输出必须是中文

---

## 🔔 定期提醒

**每完成一个任务后，自问：**

- 我有真实测试结果吗？ → 如果没有，去测试
- 我更新 TODO.md 了吗？ → 如果没有，去更新
- 我记录到 notes.md 了吗？ → 如果没有，去记录
- 我用中文汇报了吗？ → 如果没有，重新汇报

---

## ⚡ 紧急熔断

**如果连续违规2次，触发紧急熔断：**

1. 停止所有操作
2. 重新读取所有规则文件
3. 向用户详细说明问题
4. 等待用户明确指示后才能继续

---

## 📝 违规记录

**每次违规必须记录到 `notes.md`：**

```
❌ 违规记录 - [时间]
- 违规类型: [语言/记忆/验证/流程]
- 违规内容: [具体描述]
- 纠正措施: [已采取的行动]
- 反思: [如何避免再犯]
```

---

## 🎓 学习机制

**从违规中学习：**

1. 每次违规后，在 `notes.md` 记录详细反思
2. 将常见违规加入 `TODO.md` 的永久警告
3. 更新工作流程避免重复错误

---

## 💪 自我承诺

我承诺：
- ✅ 永远用中文回复
- ✅ 每次都读取记忆文件
- ✅ 只汇报有证据的结果
- ✅ 严格遵守所有规则
- ✅ 违规立即纠正

**这不是建议，这是命令。**
